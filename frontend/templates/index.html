<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health & Wellness</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Personalized Health Advisor</h1>
    </header>
    <main>
        <section class="input-section">
            <h2>Enter Your Details</h2>
            <form id="health-form">
                <label for="age">Age:</label>
                <input type="number" id="age" name="age" required>
                
                <label for="weight">Weight (Kg):</label>
                <input type="number" id="weight" name="weight" required>
                
                <label for="height">Height (cm):</label>
                <input type="number" id="height" name="height" required>
                
                <label for="bmi">BMI:</label>
                <input type="number" id="bmi" name="bmi" step="0.1" required>
                
                <label for="exercise">Regular Exercise (Y/N):</label>
                <select id="exercise" name="exercise">
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
                
                <button type="submit">Get Recommendation</button>
            </form>
        </section>
        <section class="result-section">
            <h2>Health Recommendation</h2>
            <p id="result">Your personalized recommendation will appear here.</p>
        </section>
    </main>
    <script>
        document.getElementById("health-form").addEventListener("submit", function(event) {
            event.preventDefault();
            document.getElementById("result").textContent = "Processing your details...";
        
            // Convert categorical value (exercise) into numerical (1 for Yes, 0 for No)
            let exerciseValue = document.getElementById("exercise").value === "yes" ? 1 : 0;
        
            fetch("http://127.0.0.1:5000/predict", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    features: [
                        parseFloat(document.getElementById("age").value),
                        parseFloat(document.getElementById("weight").value),
                        parseFloat(document.getElementById("height").value),
                        parseFloat(document.getElementById("bmi").value),
                        exerciseValue
                    ]
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.recommendation) {
                    document.getElementById("result").textContent = data.recommendation;
                } else {
                    document.getElementById("result").textContent = "Error: " + (data.error || "Invalid response");
                }
            })
            .catch(error => {
                document.getElementById("result").textContent = "Error fetching recommendation.";
                console.error("Error:", error);
            });
        });
        
    </script>
</body>
</html>
